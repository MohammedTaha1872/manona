<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-default>Eid Al-Adha Greeting</title>
    <!-- Google Fonts - Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Aref+Ruqaa:wght@400;700&family=Reem+Kufi:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        /* Color system */
        --primary-50: #f0fdfa;
        --primary-100: #ccfbf1;
        --primary-200: #99f6e4;
        --primary-300: #5eead4;
        --primary-400: #2dd4bf;
        --primary-500: #14b8a6;
        --primary-600: #0d9488;
        --primary-700: #0f766e;
        --primary-800: #115e59;
        --primary-900: #134e4a;
        
        --secondary-50: #fef2f2;
        --secondary-100: #fee2e2;
        --secondary-200: #fecaca;
        --secondary-300: #fca5a5;
        --secondary-400: #f87171;
        --secondary-500: #ef4444;
        --secondary-600: #dc2626;
        --secondary-700: #b91c1c;
        --secondary-800: #991b1b;
        --secondary-900: #7f1d1d;
        
        --accent-50: #fffbeb;
        --accent-100: #fef3c7;
        --accent-200: #fde68a;
        --accent-300: #fcd34d;
        --accent-400: #fbbf24;
        --accent-500: #f59e0b;
        --accent-600: #d97706;
        --accent-700: #b45309;
        --accent-800: #92400e;
        --accent-900: #78350f;
        
        --neutral-50: #f8fafc;
        --neutral-100: #f1f5f9;
        --neutral-200: #e2e8f0;
        --neutral-300: #cbd5e1;
        --neutral-400: #94a3b8;
        --neutral-500: #64748b;
        --neutral-600: #475569;
        --neutral-700: #334155;
        --neutral-800: #1e293b;
        --neutral-900: #0f172a;
        
        /* Spacing system - base 8px */
        --space-1: 8px;
        --space-2: 16px;
        --space-3: 24px;
        --space-4: 32px;
        --space-5: 40px;
        --space-6: 48px;
        --space-7: 56px;
        --space-8: 64px;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      html, body {
        width: 100%;
        height: 100%;
        overflow-x: hidden;
        font-family: 'Reem Kufi', 'Amiri', sans-serif;
        background-color: var(--primary-50);
        color: var(--neutral-800);
        line-height: 1.5;
      }
      
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--space-2);
        position: relative;
      }
      
      /* First view - Greeting with Heart */
      #greeting-view {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        min-height: 100vh;
        width: 100%;
        max-width: 600px;
        padding: var(--space-3);
        transition: opacity 0.8s ease, transform 0.8s ease;
        z-index: 1;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
      }
      
      h1 {
        font-family: 'Aref Ruqaa', serif;
        font-size: 2.5rem;
        margin-bottom: var(--space-4);
        color: var(--primary-800);
        text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        line-height: 1.2;
      }
      
      .heart-container {
        position: relative;
        cursor: pointer;
        margin: var(--space-4) auto;
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .heart {
        width: 80px;
        height: 80px;
        background-color: var(--secondary-500);
        position: relative;
        transform: rotate(45deg);
        animation: heartbeat 1.5s ease-in-out infinite;
      }
      
      .heart::before,
      .heart::after {
        content: "";
        width: 80px;
        height: 80px;
        background-color: var(--secondary-500);
        border-radius: 50%;
        position: absolute;
      }
      
      .heart::before {
        top: -40px;
        left: 0;
      }
      
      .heart::after {
        top: 0;
        left: -40px;
      }
      
      .heart-glow {
        position: absolute;
        width: 120px;
        height: 120px;
        background: radial-gradient(circle, rgba(239, 68, 68, 0.4) 0%, rgba(239, 68, 68, 0) 70%);
        border-radius: 50%;
        animation: pulse 2s ease-in-out infinite alternate;
        z-index: -1;
        transform: scale(1.2);
      }
      
      @keyframes heartbeat {
        0% {
          transform: rotate(45deg) scale(1);
        }
        14% {
          transform: rotate(45deg) scale(1.1);
        }
        28% {
          transform: rotate(45deg) scale(1);
        }
        42% {
          transform: rotate(45deg) scale(1.1);
        }
        70% {
          transform: rotate(45deg) scale(1);
        }
        100% {
          transform: rotate(45deg) scale(1);
        }
      }
      
      @keyframes pulse {
        0% {
          opacity: 0.4;
          transform: scale(1.2);
        }
        100% {
          opacity: 0.8;
          transform: scale(1.5);
        }
      }
      
      /* Second view - Surprise with Celebration */
      #surprise-view {
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        min-height: 100vh;
        width: 100%;
        padding: var(--space-3);
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #134e4a 0%, #0f766e 100%);
        opacity: 0;
        transition: opacity 1s ease;
        overflow: hidden;
      }
      
      .celebration-message {
        position: relative;
        z-index: 5;
        padding: var(--space-4);
        background-color: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(8px);
        border-radius: var(--space-2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        max-width: 800px;
        margin: 0 auto;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .eid-heading {
        font-family: 'Aref Ruqaa', serif;
        font-size: 3rem;
        font-weight: 700;
        color: var(--accent-300);
        margin-bottom: var(--space-2);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        line-height: 1.2;
      }
      
      .person-name {
        font-family: 'Amiri', serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: white;
        margin-bottom: var(--space-4);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }
      
      .eid-quote {
        font-family: 'Reem Kufi', sans-serif;
        font-size: 1.25rem;
        color: var(--neutral-100);
        margin-bottom: var(--space-4);
        line-height: 1.6;
      }
      
      .credit {
        font-family: 'Reem Kufi', sans-serif;
        font-size: 1rem;
        color: var(--accent-100);
        opacity: 0.9;
        margin-top: var(--space-2);
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      }
      
      /* Decorative elements */
      .lanterns {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        opacity: 0.7;
      }
      
      .lantern {
        position: absolute;
        width: 40px;
        height: 60px;
        background-color: var(--accent-400);
        border-radius: 20px;
        animation: sway 5s ease-in-out infinite alternate;
        box-shadow: 0 0 15px rgba(251, 191, 36, 0.7);
      }
      
      .lantern::before {
        content: "";
        position: absolute;
        top: -10px;
        left: 15px;
        width: 10px;
        height: 10px;
        background-color: var(--accent-600);
        border-radius: 50%;
      }
      
      .lantern::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 15px;
        width: 10px;
        height: 5px;
        background-color: var(--accent-600);
        border-radius: 50%;
      }
      
      .lantern:nth-child(1) {
        top: 10%;
        left: 10%;
        animation-delay: 0.5s;
        background-color: var(--accent-500);
      }
      
      .lantern:nth-child(2) {
        top: 15%;
        right: 15%;
        animation-delay: 1s;
        background-color: var(--secondary-500);
      }
      
      .lantern:nth-child(3) {
        bottom: 20%;
        left: 20%;
        animation-delay: 1.5s;
        background-color: var(--primary-500);
      }
      
      .lantern:nth-child(4) {
        bottom: 25%;
        right: 10%;
        animation-delay: 2s;
        background-color: var(--accent-600);
      }
      
      @keyframes sway {
        0% {
          transform: translateY(0) rotate(5deg);
        }
        100% {
          transform: translateY(10px) rotate(-5deg);
        }
      }
      
      .stars {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }
      
      .star {
        position: absolute;
        width: 3px;
        height: 3px;
        background-color: white;
        border-radius: 50%;
        animation: twinkle 2s ease-in-out infinite alternate;
      }
      
      @keyframes twinkle {
        0% {
          opacity: 0.2;
          transform: scale(1);
        }
        100% {
          opacity: 1;
          transform: scale(1.5);
        }
      }
      
      .crescent {
        position: absolute;
        top: 50px;
        right: 50px;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        box-shadow: 15px 15px 0 0 var(--accent-300);
        transform: rotate(-20deg);
        z-index: 0;
        opacity: 0.8;
      }
      
      /* Fireworks animation */
      .fireworks {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }
      
      .firework {
        position: absolute;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        animation: explode 2s ease-out forwards;
        opacity: 0;
      }
      
      @keyframes explode {
        0% {
          transform: translateY(100vh);
          opacity: 0;
        }
        50% {
          opacity: 1;
        }
        100% {
          transform: translateY(20vh) scale(0);
          opacity: 0;
        }
      }
      
      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        animation: fly 1s ease-out forwards;
        opacity: 0;
      }
      
      @keyframes fly {
        0% {
          transform: translate(0, 0);
          opacity: 1;
        }
        100% {
          transform: translate(var(--x), var(--y));
          opacity: 0;
        }
      }
      
      /* Audio control */
      .audio-control {
        position: absolute;
        bottom: var(--space-2);
        right: var(--space-2);
        z-index: 10;
        background-color: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(5px);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }
      
      .audio-control:hover {
        background-color: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }
      
      .audio-icon {
        width: 24px;
        height: 24px;
        fill: white;
      }
      
      /* Enhanced Walking Sheep Styles */
      .sheep-world {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;
        pointer-events: none;
        overflow: hidden;
      }
      
      .sheep {
        position: absolute;
        bottom: 20px;
        width: 80px;
        height: 60px;
        background-color: white;
        border-radius: 40px 40px 0 0;
        z-index: 2;
        transition: transform 0.3s ease;
      }
      
      .sheep.flipped {
        transform: scaleX(-1);
      }
      
      .sheep-head {
        position: absolute;
        width: 30px;
        height: 35px;
        background-color: #3f3f3f;
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        top: -15px;
        right: 10px;
        transition: transform 0.5s ease;
        animation: sheep-head-bob 1.2s infinite alternate;
      }
      
      @keyframes sheep-head-bob {
        0%, 100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-2px) rotate(3deg);
        }
      }
      
      .sheep-ear {
        position: absolute;
        width: 10px;
        height: 15px;
        background-color: #3f3f3f;
        border-radius: 50%;
      }
      
      .sheep-ear-left {
        top: -5px;
        left: 2px;
        transform: rotate(-30deg);
      }
      
      .sheep-ear-right {
        top: -5px;
        right: 2px;
        transform: rotate(30deg);
      }
      
      .sheep-eye {
        position: absolute;
        width: 6px;
        height: 6px;
        background-color: white;
        border-radius: 50%;
        top: 12px;
      }
      
      .sheep-eye-left {
        left: 7px;
      }
      
      .sheep-eye-right {
        right: 7px;
      }
      
      .sheep-leg {
        position: absolute;
        width: 8px;
        height: 25px;
        background-color: #3f3f3f;
        bottom: -20px;
        border-radius: 5px;
        transform-origin: top center;
      }
      
      /* Enhanced leg walking animations */
      .sheep-leg-front-left {
        left: 15px;
      }
      
      .sheep-leg-front-right {
        left: 30px;
      }
      
      .sheep-leg-back-left {
        right: 30px;
      }
      
      .sheep-leg-back-right {
        right: 15px;
      }
      
      /* Sheep walking to right */
      .walking-right .sheep-leg-front-left {
        animation: walk-front-leg-right 0.6s infinite;
      }
      
      .walking-right .sheep-leg-front-right {
        animation: walk-front-leg-right 0.6s infinite 0.3s;
      }
      
      .walking-right .sheep-leg-back-left {
        animation: walk-back-leg-right 0.6s infinite 0.3s;
      }
      
      .walking-right .sheep-leg-back-right {
        animation: walk-back-leg-right 0.6s infinite;
      }
      
      /* Sheep walking to left */
      .walking-left .sheep-leg-front-left {
        animation: walk-front-leg-left 0.6s infinite;
      }
      
      .walking-left .sheep-leg-front-right {
        animation: walk-front-leg-left 0.6s infinite 0.3s;
      }
      
      .walking-left .sheep-leg-back-left {
        animation: walk-back-leg-left 0.6s infinite 0.3s;
      }
      
      .walking-left .sheep-leg-back-right {
        animation: walk-back-leg-left 0.6s infinite;
      }
      
      /* Enhanced walking animations */
      @keyframes walk-front-leg-right {
        0%, 100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(4px) rotate(25deg);
        }
        50% {
          transform: translateX(0) rotate(0deg);
        }
        75% {
          transform: translateX(-2px) rotate(-15deg);
        }
      }
      
      @keyframes walk-back-leg-right {
        0%, 100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(-2px) rotate(-15deg);
        }
        50% {
          transform: translateX(0) rotate(0deg);
        }
        75% {
          transform: translateX(4px) rotate(25deg);
        }
      }
      
      @keyframes walk-front-leg-left {
        0%, 100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(-4px) rotate(-25deg);
        }
        50% {
          transform: translateX(0) rotate(0deg);
        }
        75% {
          transform: translateX(2px) rotate(15deg);
        }
      }
      
      @keyframes walk-back-leg-left {
        0%, 100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(2px) rotate(15deg);
        }
        50% {
          transform: translateX(0) rotate(0deg);
        }
        75% {
          transform: translateX(-4px) rotate(-25deg);
        }
      }
      
      /* Sheep body wobble effect */
      .walking-right, .walking-left {
        animation: sheep-body-wobble 0.6s infinite alternate;
      }
      
      @keyframes sheep-body-wobble {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-2px);
        }
      }
      
      /* Sheep wool texture */
      .wool {
        position: absolute;
        width: 12px;
        height: 12px;
        background-color: white;
        border-radius: 50%;
        z-index: -1;
      }
      
      /* Responsive styles */
      @media (max-width: 768px) {
        h1 {
          font-size: 2rem;
        }
        
        .eid-heading {
          font-size: 2.25rem;
        }
        
        .person-name {
          font-size: 2rem;
        }
        
        .heart {
          width: 60px;
          height: 60px;
        }
        
        .heart::before,
        .heart::after {
          width: 60px;
          height: 60px;
        }
        
        .heart::before {
          top: -30px;
        }
        
        .heart::after {
          left: -30px;
        }
        
        .heart-container {
          width: 100px;
          height: 100px;
        }
        
        .heart-glow {
          width: 100px;
          height: 100px;
        }
        
        .lantern {
          width: 30px;
          height: 45px;
        }
        
        .crescent {
          width: 60px;
          height: 60px;
          top: 30px;
          right: 30px;
        }
        
        .sheep {
          width: 70px;
          height: 50px;
        }
        
        .sheep-head {
          width: 25px;
          height: 30px;
        }
      }
      
      @media (max-width: 480px) {
        h1 {
          font-size: 1.75rem;
        }
        
        .eid-heading {
          font-size: 1.75rem;
        }
        
        .person-name {
          font-size: 1.5rem;
        }
        
        .eid-quote {
          font-size: 1rem;
        }
        
        .celebration-message {
          padding: var(--space-2);
        }
        
        .heart {
          width: 50px;
          height: 50px;
        }
        
        .heart::before,
        .heart::after {
          width: 50px;
          height: 50px;
        }
        
        .heart::before {
          top: -25px;
        }
        
        .heart::after {
          left: -25px;
        }
        
        .heart-container {
          width: 80px;
          height: 80px;
        }
        
        .heart-glow {
          width: 80px;
          height: 80px;
        }
        
        .sheep {
          width: 60px;
          height: 45px;
        }
        
        .sheep-head {
          width: 22px;
          height: 26px;
        }
        
        .sheep-ear {
          width: 8px;
          height: 12px;
        }
        
        .sheep-leg {
          width: 7px;
          height: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Greeting View -->
    <div id="greeting-view">
      <h1>اضغط على القلب علشان تشوف مفاجأتي ليك ❤️</h1>
      
      <div class="heart-container" id="heartButton">
        <div class="heart"></div>
        <div class="heart-glow"></div>
      </div>
    </div>
    
    <!-- Surprise View -->
    <div id="surprise-view">
      <!-- Decorative elements -->
      <div class="lanterns">
        <div class="lantern"></div>
        <div class="lantern"></div>
        <div class="lantern"></div>
        <div class="lantern"></div>
      </div>
      
      <div class="crescent"></div>
      
      <div class="stars"></div>
      
      <div class="fireworks" id="fireworks"></div>
      
      <!-- Enhanced Sheep World -->
      <div class="sheep-world" id="sheepWorld"></div>
      
      <div class="celebration-message">
        <h2 class="eid-heading">عيد أضحى مبارك</h2>
        <p class="person-name" id="personName">يا MaNonA</p>
        <p class="eid-quote">تقبل الله منا ومنكم صالح الأعمال وكل عام وأنتم بخير</p>
        <p class="credit">مع تحيات محمد ❤️</p>
      </div>
      
      <div class="audio-control" id="audioControl">
        <svg class="audio-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q2.484 1.219 2.484 4.031zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z"></path>
        </svg>
      </div>
      
      <audio id="eidMusic" loop>
        <source src="./videoplayback.webm" type="audio/webm">
        Your browser does not support the audio element.
      </audio>
    </div>
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Elements
        const greetingView = document.getElementById('greeting-view');
        const surpriseView = document.getElementById('surprise-view');
        const heartButton = document.getElementById('heartButton');
        const eidMusic = document.getElementById('eidMusic');
        const audioControl = document.getElementById('audioControl');
        const fireworksContainer = document.getElementById('fireworks');
        const sheepWorld = document.getElementById('sheepWorld');
        
        // Audio control
        let isMuted = false;
        
        audioControl.addEventListener('click', function() {
          if (isMuted) {
            eidMusic.play();
            audioControl.innerHTML = `
              <svg class="audio-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q2.484 1.219 2.484 4.031zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z"></path>
              </svg>
            `;
            isMuted = false;
          } else {
            eidMusic.pause();
            audioControl.innerHTML = `
              <svg class="audio-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.063-1.172l-2.063-2.063v3.469l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0 2.391-1.383 4.219t-3.586 2.484v-2.016q1.734-0.563 2.859-1.969t1.125-2.719q0-0.328-0.047-0.609l-6.75-6.75v-1.266l5.016-5.016v6.609z"></path>
              </svg>
            `;
            isMuted = true;
          }
        });
        
        // Heart button click event
        heartButton.addEventListener('click', function() {
          showSurprise();
        });
        
        // Show surprise view
        function showSurprise() {
          // Transition effect
          greetingView.style.opacity = '0';
          greetingView.style.transform = 'translateY(-20px)';
          
          setTimeout(() => {
            greetingView.style.display = 'none';
            surpriseView.style.display = 'flex';
            
            // Show celebration view with a slight delay
            setTimeout(() => {
              surpriseView.style.opacity = '1';
              
              // Start music
              eidMusic.play().catch(error => {
                console.log('Autoplay prevented. Please interact with the document first.');
              });
              
              // Create stars
              createStars();
              
              // Create enhanced sheep
              startSheepSimulation();
              
              // Start fireworks
              startFireworks();
            }, 100);
          }, 800);
        }
        
        // Enhanced sheep simulation
        function startSheepSimulation() {
          // Create initial set of sheep
          const initialSheepCount = 8; // More sheep for a lively scene
          
          for (let i = 0; i < initialSheepCount; i++) {
            setTimeout(() => {
              createSheepWithBehavior();
            }, i * 1000); // Stagger sheep creation
          }
          
          // Continue to add new sheep occasionally
          setInterval(() => {
            if (document.querySelectorAll('.sheep').length < 12) { // Limit max sheep
              createSheepWithBehavior();
            }
          }, 5000);
        }
        
        // Create a sheep with realistic behavior
        function createSheepWithBehavior() {
          // Create sheep element
          const sheep = document.createElement('div');
          sheep.classList.add('sheep');
          
          // Randomize sheep appearance
          const sheepSize = 0.7 + Math.random() * 0.6; // 70% to 130% of original size
          sheep.style.transform = `scale(${sheepSize})`;
          
          // Randomize speed (slower is more realistic)
          const walkSpeed = 15 + Math.random() * 20; // 15-35 seconds to cross the screen
          
          // Randomize vertical position (make sure they appear at different heights)
          const bottomPosition = 5 + Math.random() * 60;
          sheep.style.bottom = `${bottomPosition}px`;
          
          // Decide direction
          const goingRight = Math.random() > 0.5;
          
          // Set initial position
          if (goingRight) {
            sheep.style.left = '-100px';
            sheep.classList.add('walking-right');
            // For right-walking sheep, flip the sheep
            sheep.classList.add('flipped');
          } else {
            sheep.style.left = '100%';
            sheep.classList.add('walking-left');
          }
          
          // Add sheep parts
          const sheepHead = createSheepHead();
          const frontLeftLeg = createSheepLeg('sheep-leg-front-left');
          const frontRightLeg = createSheepLeg('sheep-leg-front-right');
          const backLeftLeg = createSheepLeg('sheep-leg-back-left');
          const backRightLeg = createSheepLeg('sheep-leg-back-right');
          
          // Add wool texture for more realistic appearance
          addWoolTexture(sheep);
          
          // Append all parts to sheep
          sheep.appendChild(sheepHead);
          sheep.appendChild(frontLeftLeg);
          sheep.appendChild(frontRightLeg);
          sheep.appendChild(backLeftLeg);
          sheep.appendChild(backRightLeg);
          
          // Add sheep to world
          sheepWorld.appendChild(sheep);
          
          // Animate sheep movement
          animateSheep(sheep, goingRight, walkSpeed);
          
          // Make sheep occasionally change direction
          if (Math.random() > 0.7) { // 30% chance to change direction during walk
            const timeBeforeChange = Math.random() * walkSpeed * 500;
            setTimeout(() => {
              changeSheepDirection(sheep, goingRight);
            }, timeBeforeChange);
          }
          
          // Make sheep occasionally stop and look around
          if (Math.random() > 0.6) { // 40% chance to pause
            const timeBeforePause = Math.random() * walkSpeed * 400;
            setTimeout(() => {
              pauseSheep(sheep, goingRight, walkSpeed);
            }, timeBeforePause);
          }
        }
        
        // Create sheep head with more detail
        function createSheepHead() {
          const head = document.createElement('div');
          head.classList.add('sheep-head');
          
          const leftEar = document.createElement('div');
          leftEar.classList.add('sheep-ear', 'sheep-ear-left');
          
          const rightEar = document.createElement('div');
          rightEar.classList.add('sheep-ear', 'sheep-ear-right');
          
          const leftEye = document.createElement('div');
          leftEye.classList.add('sheep-eye', 'sheep-eye-left');
          
          const rightEye = document.createElement('div');
          rightEye.classList.add('sheep-eye', 'sheep-eye-right');
          
          head.appendChild(leftEar);
          head.appendChild(rightEar);
          head.appendChild(leftEye);
          head.appendChild(rightEye);
          
          return head;
        }
        
        // Create sheep leg
        function createSheepLeg(legClass) {
          const leg = document.createElement('div');
          leg.classList.add('sheep-leg', legClass);
          return leg;
        }
        
        // Add wool texture to make sheep look fluffy
        function addWoolTexture(sheep) {
          const woolCount = 10 + Math.floor(Math.random() * 6);
          
          for (let i = 0; i < woolCount; i++) {
            const wool = document.createElement('div');
            wool.classList.add('wool');
            
            // Position wool randomly on sheep body
            const topPos = Math.random() * 40;
            const leftPos = 10 + Math.random() * 60;
            
            wool.style.top = `${topPos}%`;
            wool.style.left = `${leftPos}%`;
            
            // Randomize wool size
            const size = 8 + Math.random() * 8;
            wool.style.width = `${size}px`;
            wool.style.height = `${size}px`;
            
            sheep.appendChild(wool);
          }
        }
        
        // Animate sheep walking
        function animateSheep(sheep, goingRight, duration) {
          // Starting and ending positions
          const startPos = goingRight ? -100 : window.innerWidth;
          const endPos = goingRight ? window.innerWidth : -100;
          
          // Start animation
          let startTime = null;
          const totalDuration = duration * 1000; // Convert to milliseconds
          
          function step(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            const progress = Math.min(elapsed / totalDuration, 1);
            
            // Calculate current position
            const currentPos = startPos + (endPos - startPos) * progress;
            sheep.style.left = `${currentPos}px`;
            
            // Continue animation until complete
            if (progress < 1) {
              requestAnimationFrame(step);
            } else {
              // When animation completes, remove sheep and create a new one
              sheep.remove();
              createSheepWithBehavior();
            }
          }
          
          requestAnimationFrame(step);
        }
        
        // Change sheep direction during walk
        function changeSheepDirection(sheep, currentlyGoingRight) {
          // Remove current direction class
          sheep.classList.remove(currentlyGoingRight ? 'walking-right' : 'walking-left');
          
          // Add new direction class
          const newDirection = !currentlyGoingRight;
          sheep.classList.add(newDirection ? 'walking-right' : 'walking-left');
          
          // Toggle flipped class
          if (newDirection) {
            sheep.classList.add('flipped');
          } else {
            sheep.classList.remove('flipped');
          }
          
          // Get current position
          const currentLeft = parseFloat(sheep.style.left);
          
          // Cancel current animation and start new one
          sheep.style.transition = 'none';
          sheep.style.left = `${currentLeft}px`;
          
          // Restart animation in new direction
          setTimeout(() => {
            sheep.style.transition = '';
            animateSheep(sheep, newDirection, 15 + Math.random() * 15);
          }, 50);
        }
        
        // Make sheep pause and look around
        function pauseSheep(sheep, goingRight, originalDuration) {
          // Store original classes to restore later
          const originalClasses = [...sheep.classList];
          
          // Remove walking animation classes temporarily
          sheep.classList.remove('walking-right', 'walking-left');
          
          // Get current position
          const currentLeft = parseFloat(sheep.style.left);
          sheep.style.left = `${currentLeft}px`;
          
          // Make head look around (slight rotation)
          const head = sheep.querySelector('.sheep-head');
          if (head) {
            head.style.animation = 'none';
            setTimeout(() => {
              head.style.transform = 'rotate(15deg)';
              setTimeout(() => {
                head.style.transform = 'rotate(-10deg)';
                setTimeout(() => {
                  head.style.transform = '';
                  head.style.animation = '';
                }, 700);
              }, 800);
            }, 100);
          }
          
          // Resume walking after pause
          const pauseDuration = 1500 + Math.random() * 1500;
          setTimeout(() => {
            // Restore original direction class
            sheep.className = ''; // Clear all classes
            originalClasses.forEach(cls => sheep.classList.add(cls));
            
            // Resume animation
            animateSheep(sheep, goingRight, originalDuration / 2);
          }, pauseDuration);
        }
        
        // Create star elements
        function createStars() {
          const starsContainer = document.querySelector('.stars');
          const starCount = 50;
          
          for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            
            // Random position
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            
            // Random size
            const size = Math.random() * 3 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            
            // Random animation delay
            const delay = Math.random() * 2;
            star.style.animationDelay = `${delay}s`;
            
            starsContainer.appendChild(star);
          }
        }
        
        // Create and animate fireworks
        function startFireworks() {
          setInterval(createFirework, 1000);
        }
        
        function createFirework() {
          const firework = document.createElement('div');
          firework.classList.add('firework');
          
          // Random position (horizontal)
          const x = Math.random() * 100;
          firework.style.left = `${x}%`;
          
          // Random color
          const colors = [
            '#f87171', // Red
            '#fbbf24', // Yellow
            '#34d399', // Green
            '#60a5fa', // Blue
            '#a78bfa', // Purple
            '#f472b6'  // Pink
          ];
          
          const color = colors[Math.floor(Math.random() * colors.length)];
          firework.style.backgroundColor = color;
          
          fireworksContainer.appendChild(firework);
          
          // Explode after reaching top
          setTimeout(() => {
            explode(firework, color);
            firework.remove();
          }, 1000);
        }
        
        function explode(firework, color) {
          const particles = 30;
          const rect = firework.getBoundingClientRect();
          
          for (let i = 0; i < particles; i++) {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            particle.style.backgroundColor = color;
            particle.style.top = `${rect.top}px`;
            particle.style.left = `${rect.left}px`;
            
            // Randomize particle direction
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * 100 + 50;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            
            particle.style.setProperty('--x', `${x}px`);
            particle.style.setProperty('--y', `${y}px`);
            
            document.body.appendChild(particle);
            
            // Remove particle after animation
            setTimeout(() => {
              particle.remove();
            }, 1000);
          }
        }
      });
    </script>
  </body>
</html>
